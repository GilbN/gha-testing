!function(e){e.fn.bgSlideShow=function(n){var t=new Array,r=e.extend({current:-1,images:[],transitionDelay:5e3,transitionSpeed:3e3,transitionEffect:"fade-in",gradient:null,randomize:!1,initialBackground:null,debug:!1,eventHandlers:{beforeInit:null,afterInit:null,beforeChange:null,afterChange:null},slideControls:{enabled:!0,classes:null}},n);return this.each((function(n,t){var i=function(n,t){var r={};r.uniqueId=function(n){var t=e(n).attr("id");t||(t=(r="ABCDEFGHIJKLMNOPQRSTUVWXYZ").charAt(Math.floor(Math.random()*r.length))+Date.now());var r;return t}(n),r.current=e(n).data("current")||t.current||0,r.images=t.images,r.slideControls=t.slideControls,r.slideControls.enabled=a(e(n).data("slidecontrols.enabled"),t.slideControls.enabled),r.slideControls.classes=e(n).data("slidecontrols.classes")||t.slideControls.classes,e(n).data("images")&&(r.images=e(n).data("images").split(",").map((e=>e.trim())));return r.initialBackground=e(n).data("initialbackground")||t.initialBackground,r.transitionDelay=e(n).data("transitiondelay")||t.transitionDelay,r.gradient=e(n).data("gradient")||t.gradient,r.transitionSpeed=e(n).data("transitionspeed")||t.transitionSpeed,r.transitionEffect=e(n).data("transitioneffect")||t.transitionEffect,r.randomize=a(e(n).data("randomize"),t.randomize),r.debug=a(e(n).data("debug"),t.debug),r.eventHandlers=t.eventHandlers,r.defaultDisplay=e(n).css("display")||"block",r}(this,r);i.eventHandlers.beforeInit&&i.eventHandlers.beforeInit(this,i),function(n,t){s(t.debug,"ProcessShow with element ["+n+"]"),e(n).data("bgSlideShowApplied",!0),function(n,t){if(!t.initialBackground)return;s(t.debug,"Setting initial image");var r=t.initialBackground,i="";if(!isNaN(r)&&r<t.images.length)i=t.images[r],t.current=r+1;else if("random"==r.toLowerCase()){var a=t.randomize;t.randomize=!0,i=o(t),t.randomize=a}else i=t.initialBackground;t.gradient?e(n).css("background",t.gradient+", url("+i+") center center/cover no-repeat fixed"):e(n).css("background","url("+i+") center center/cover no-repeat fixed")}(n,t),c(t.images),t.wrapBgElement=e("<div/>",{class:"jquery-bg-slideshow-wrap-bg-element",id:t.uniqueId+"-wrap-widget"}),e(n).wrap(t.wrapBgElement);var r=e(n).css("position","absolute");(function(n,t,r){if(s(r.debug,"List controls enabled: "+r.slideControls.enabled),1==r.slideControls.enabled){r.slideControlsElement=e("<div/>",{class:"jquery-bg-slideshow-list-control-element"+(r.slideControls.classes?" "+r.slideControls.classes:"")});for(var i=r.images.length,a=0;a<i;a++){var o=r.uniqueId+"-image"+a;e("<div/>",{class:"jquery-bg-slideshow-list-control-image-element",id:o}).appendTo(r.slideControlsElement)}e(t).append(r.slideControlsElement),e("[id^='"+r.uniqueId+"-image']").off("click").on("click",(function(){e(r.cloned).remove();var t=e(this).attr("id"),i=parseInt(t.match(/-image(\d+)/)[1]);r.current=i+1,e(n).css("background","url("+r.images[i]+")"),d(r,r.current-1),console.log("clicked on ["+e(this).attr("id")+"]")}))}})(n,r.parent(),t),s(t.debug,"Setting timeout for element ["+n+"]"),d(t,t.current),t.timerId=setTimeout(l,t.transitionDelay,n,t)}(this,i),i.eventHandlers.afterInit&&i.eventHandlers.afterInit(this,i),s(i.debug,"Done processing element ["+t+"] number ["+n+"]")}));function a(e,n){return void 0===e?n:"boolean"==typeof e?e:(e=e.trim().toLowerCase()).startsWith("t")||e.startsWith("y")||1==e}function s(e,n){e&&console.log(n)}function o(e){if(e.randomize){for(var n=e.current;n==e.current;)n=Math.floor(Math.random()*e.images.length);return e.current=n,e.images[n]}e.current>=e.images.length&&(e.current=0);var t=e.images[e.current];return e.current=e.current+1,t}function l(n,t){s(t.debug,"Calling timer for element ["+n+"]"),function(n,t,r){t.eventHandlers.beforeChange&&t.eventHandlers.beforeChange(n,t,r);e(t.cloned).length&&e(t.cloned).remove();t.cloned=e(n).clone(),t.gradient?e(t.cloned).addClass("jquery-bg-slideshow-cloned").css({background:t.gradient+", url("+r+") center center/cover no-repeat fixed"}).insertAfter(e(n)):e(t.cloned).addClass("jquery-bg-slideshow-cloned").css({background:"url("+r+") center center/cover no-repeat fixed"}).insertAfter(e(n));e(t.cloned).addClass("jquery-bg-slideshow-cloned").css({background:t.gradient+", url("+r+") center center/cover no-repeat fixed"}).insertAfter(e(n)),e(t.cloned).css("display",t.defaultDisplay),s(t.debug,"Before element fadeout"),e(n).stop().fadeOut(t.transitionSpeed,(function(){s(t.debug,"Fading out is done - should remove cloned element"),t.gradient?e(this).css({background:t.gradient+", url("+r+") center center/cover no-repeat fixed",position:"absolute",display:t.defaultDisplay}):e(this).css({background:"url("+r+") center center/cover no-repeat fixed",position:"absolute",display:t.defaultDisplay}),t.eventHandlers.afterChange&&t.eventHandlers.afterChange(n,t,r),d(t,t.current),t.timerId=setTimeout(l,t.transitionDelay,n,t)}))}(n,t,o(t))}function d(n,t){if(n.slideControls.enabled){var r="#"+n.uniqueId+"-image"+t;e("[id^='"+n.uniqueId+"-image']").removeClass("jquery-bg-slideshow-list-control-image-active-element"),e(r).addClass("jquery-bg-slideshow-list-control-image-active-element")}}function c(e){for(i=0;i<e.length;i++){var n=c.length;t[n]=new Image,t[n].src=e[i]}}},e.fn.bgSlideshowApplied=function(){return 1==e(this).data("bgSlideShowApplied")}}(jQuery);
